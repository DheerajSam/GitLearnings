<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

        <title>Local Storage</title>
    </head>
    
    <body>
        <form onsubmit="addToLocalStorage(event)">
            <div class="container">
                <header class="mb-5"><h1>Add User Details To Local Storage</h1></header>
                      
                <label class="form-label">User Name:</label>        
                <input id="user" type="text" class="form-control" required/>

                <label class="form-label">Email:</label>        
                <input id="email" type="text" class="form-control" required/>

                <label class="form-label">Mobile No:</label>        
                <input id="phone" type="text" class="form-control"/><br> 

                <button class="btn-secondary btn">Submit</button><br><br>

                
            </div> 
        </form>    
        
        <ul id="listOfusers">
            <!-- <button class="button">Delete</button> -->
        </ul>
        
        <script>
            function addToLocalStorage(event){
                event.preventDefault();
                const name = document.getElementById('user').value;
                const email = document.getElementById('email').value;
                const mobile  = document.getElementById('phone').value;
                // localStorage.setItem('User Name', name);
                // localStorage.setItem('Email',email);
                // localStorage.setItem('Mobile',mobile);
                
                const obj = {
                    name,
                    email,
                    mobile                
                };

                //store multiple user data in local storage taking the key as Email which is unique
                localStorage.setItem(obj.email,JSON.stringify(obj));

                //show the user details on the screen as a list using DOM manipulation
                showOnscreen(obj);
            }

            
            function showOnscreen(obj){
                let userList = document.getElementById('listOfusers');
                let childElement = document.createElement('li');
                childElement.textContent = obj.name +', '+ obj.email +', '+ obj.mobile +' ';
                userList.appendChild(childElement);

                //Delete event
                userList.addEventListener('click',ondelete);

                //create del button element
                let delBtn = document.createElement('button');
                delBtn.className = 'btn btn-danger btn-sm float-right delete';

                //Delete User Data from Screen and Local Storage
                function ondelete(e){                
                    if(e.target.classList.contains('delete')){                    
                        let li = e.target.parentElement;
                        userList.removeChild(li);  
                        localStorage.removeItem(obj.email);                  
                    }
                }

                //Append text node
                delBtn.appendChild(document.createTextNode('Delete'));

                //Append Delete button to li
                childElement.appendChild(delBtn);
            }       
            
        </script>
        
    </body>
</html>
